<!DOCTYPE HTML>

<html>
    <head>
        
            
                <title>I Deployed My Sinatra App To Heroku</title>
            
        

        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="generator" content="Hugo 0.20.2" />
        


        
            <meta name="author" content="Seth">
        
        
            <meta name="description" content="Day 51 of Flatiron School">
        

        

  <meta name="twitter:card" content="summary"/>



<meta name="twitter:text:title" content="I Deployed My Sinatra App To Heroku"/>
<meta name="twitter:title" content="I Deployed My Sinatra App To Heroku"/>
<meta name="twitter:description" content="Day 51 of Flatiron School"/>
<meta name="twitter:site" content="@itzsaga"/>

        <meta property="og:title" content="I Deployed My Sinatra App To Heroku" />
<meta property="og:description" content="Day 51 of Flatiron School" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://itzsaga.github.io/post/day-051/" />



<meta property="article:published_time" content="2017-04-18T23:34:13-05:00"/>
<meta property="article:modified_time" content="2017-04-18T23:34:13-05:00"/>











        
<meta itemprop="name" content="I Deployed My Sinatra App To Heroku">
<meta itemprop="description" content="Day 51 of Flatiron School">


<meta itemprop="dateModified" content="2017-04-18T23:34:13-05:00" />
<meta itemprop="wordCount" content="790">



<meta itemprop="keywords" content="daily blog,flatiron blog,freeCodeCamp Nashville,general," />

        

        

        
        
            
        

        
        
            <link rel="stylesheet" href="/css/google-font.css" />
            <link rel="stylesheet" href="/css/font-awesome.min.css" />
            <link rel="stylesheet" href="/css/main.css" />
            <link rel="stylesheet" href="/css/add-on.css" />
            <link rel="stylesheet" href="/css/monokai-sublime.css">
        

        

        
        
        
            
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-96008952-1', 'auto');
ga('send', 'pageview');
</script>

        
    </head>
    <body>

        
        <div id="wrapper">

    
    
<header id="header">
    
        <h2><a href="/">Seth&#39;s Journey</i></a></h2>
    

    <nav class="links">
        <ul>
            
                <li>
                    <a href="/">
                        
                            <i class="fa fa-newspaper-o">&nbsp;</i>Blog
                    </a>
                </li>
            
                <li>
                    <a href="/about">
                        
                            <i class="fa fa-user">&nbsp;</i>About
                    </a>
                </li>
            
        </ul>
    </nav>
    <nav class="main">
        <ul>
            
            <li id="share-nav" class="share-menu" style="display:none;">
                <a class="fa-share-alt" href="#share-menu">Share</a>
            </li>
            
            <li class="search">
                <a class="fa-search" href="#search">Search</a>
                <form id="search" method="get" action="//google.com/search">
                    <input type="text" name="q" placeholder="Search" />
                    <input type="hidden" name="q" value="site:https://itzsaga.github.io/">
                </form>
            </li>
            <li class="menu">
                <a class="fa-bars" href="#menu">Menu</a>
            </li>
        </ul>
    </nav>
</header>


<section id="menu">

    
        <section>
            <form class="search" method="get" action="//google.com/search">
                <input type="text" name="q" placeholder="Search" />
                <input type="hidden" name="q" value="site:https://itzsaga.github.io/">
            </form>
        </section>

    
        <section>
            <ul class="links">
                
                    <li>
                        <a href="/">
                            <h3>
                                
                                    <i class="fa fa-newspaper-o">&nbsp;</i>
                                
                                Blog
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/about">
                            <h3>
                                
                                    <i class="fa fa-user">&nbsp;</i>
                                
                                About
                            </h3>
                        </a>
                    </li>
                
            </ul>
        </section>

    
        <section>
            <ul class="links">
                <header>
                    <h3>Recent Posts</h3>
                </header>
                
                    
                

                
                    <li>
                        <a href="https://itzsaga.github.io/post/day-099/"><p>Popular Gems Are All The Rage</p></a>
                    </li>
                
                    <li>
                        <a href="https://itzsaga.github.io/post/day-098/"><p>The Asset Pipeline Is Flowing</p></a>
                    </li>
                
                    <li>
                        <a href="https://itzsaga.github.io/post/fccnashville-june-meetup-recap/"><p>freeCodeCamp Nashville June Meetup Recap</p></a>
                    </li>
                
            </ul>
        </section>

    
        
</section>

    <section id="share-menu">
    <section id="social-share-nav">
        <ul class="links">
            <header>
                <h3>Share this post <i class="fa fa-smile-o"></i></h3>
            </header>
            


<li><a href="//twitter.com/share?url=https%3a%2f%2fitzsaga.github.io%2fpost%2fday-051%2f&text=I%20Deployed%20My%20Sinatra%20App%20To%20Heroku&via=itzsaga" target="_blank" class="share-btn twitter">
    <i class="fa fa-twitter"></i>
    <p>Twitter</p>
</a></li>


<li><a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fitzsaga.github.io%2fpost%2fday-051%2f" target="_blank" class="share-btn facebook">
    <i class="fa fa-facebook"></i>
    <p>Facebook</p>
</a></li>


<li><a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fitzsaga.github.io%2fpost%2fday-051%2f&title=I%20Deployed%20My%20Sinatra%20App%20To%20Heroku" target="_blank" class="share-btn linkedin">
    <i class="fa fa-linkedin"></i>
    <p>LinkedIn</p>
</a></li>


<li><a href="mailto:?subject=Check out this post by Seth&body=https%3a%2f%2fitzsaga.github.io%2fpost%2fday-051%2f" target="_blank" class="share-btn email">
    <i class="fa fa-envelope"></i>
    <p>Email</p>
</a></li>

        </ul>
    </section>
</section>

    
    <div id="main">
        
        
        <article class="post">
    <header>
    <div class="title">
        
            <h1><a href="https://itzsaga.github.io/post/day-051/">I Deployed My Sinatra App To Heroku</a></h1>
            
        
        
            <p>Day 51 of Flatiron School</p>
        
    </div>
    <div class="meta">
        
            
        

        <time class="published"
            datetime='2017-04-18'>
            April 18, 2017</time>
        <span class="author">Seth</span>
        
            <p>4 minute read</p>
        
        
    </div>
</header>


    <section id="social-share">
        <ul class="icons">
            


<li><a href="//twitter.com/share?url=https%3a%2f%2fitzsaga.github.io%2fpost%2fday-051%2f&text=I%20Deployed%20My%20Sinatra%20App%20To%20Heroku&via=itzsaga" target="_blank" class="share-btn twitter">
    <i class="fa fa-twitter"></i>
    <p>Twitter</p>
</a></li>


<li><a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fitzsaga.github.io%2fpost%2fday-051%2f" target="_blank" class="share-btn facebook">
    <i class="fa fa-facebook"></i>
    <p>Facebook</p>
</a></li>


<li><a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fitzsaga.github.io%2fpost%2fday-051%2f&title=I%20Deployed%20My%20Sinatra%20App%20To%20Heroku" target="_blank" class="share-btn linkedin">
    <i class="fa fa-linkedin"></i>
    <p>LinkedIn</p>
</a></li>


<li><a href="mailto:?subject=Check out this post by Seth&body=https%3a%2f%2fitzsaga.github.io%2fpost%2fday-051%2f" target="_blank" class="share-btn email">
    <i class="fa fa-envelope"></i>
    <p>Email</p>
</a></li>

        </ul>
    </section>
    
    

    
        
        




    


        

        <a href="https://itzsaga.github.io/post/day-051/" class="image featured">
            <img src="../../images//win.jpg" alt="winning fighter" />
        </a>
    


    <div id="content">
        <p><strong>MY SINATRA PORTFOLIO PROJECT IS DONE!!!</strong></p>

<p>You can say I&rsquo;m pretty stoked. This blog is part of the requirements though so get ready :-). Actually, I didn&rsquo;t take enough notes to really get into the code in this blog. I did hit some solid stumbling blocks and there is some major refactoring of code needing to happen but I&rsquo;m overall pretty happy. A large part of the time I spent was making the app look good utilizing <a href="https://getbootstrap.com/">Bootstrap</a>.</p>

<p>Something that definitely needs to be refactored is one of my helper methods:</p>

<pre><code class="language-ruby">def current_user_parents
  parents = []
  current_user(session).houses.each do |house|
    Parent.where(house_id: house.id).each do |parent|
      parents &lt;&lt; parent
    end
  end
  parents
end
</code></pre>

<p>It&rsquo;s sandwich code (starts with a variable set to an empty array, fills that array, returns that array) so I know I can most likely eliminate two lines from that or even three if I&rsquo;m not pushing onto that <code>parents</code> variable anymore. We&rsquo;ll see. I&rsquo;m interested to pick the brain of the instructor that goes over the project with me.</p>

<p>You can see what I&rsquo;ll call v0.8 (I figure it&rsquo;s close to v1.0 but not yet lol) at <a href="https://your-neighbors.herokuapp.com/">https://your-neighbors.herokuapp.com/</a>. I feel like the code is solid but still some functionality and visual things that need to be resolved.</p>

<ul>
<li>I&rsquo;d like to add a static footer to the site.</li>
<li>If a house is deleted the parent and children remain in the database but can never be accessed again because of how I list them in relation to the house they&rsquo;re in.</li>
<li>When there are no parents or children I need to add a link suggesting to create some.</li>
<li>When a user tries to access the info for something they didn&rsquo;t create (ie. they created house 8 but try and go to the link for house 5) the error page tells them to login even though they are logged in. I need to create a different error page for logged in users trying to access stuff that isn&rsquo;t there&rsquo;s vs. the error page when a person isn&rsquo;t logged in.</li>
<li>Add some color!</li>
</ul>

<p>I&rsquo;m sure I could find more. Feel free to check out the app. Sign up, use it, and report issues to the GitHub link at the top right on every page of the application.</p>

<p>It was interesting deploying to Heroku as well. There isn&rsquo;t a solid guide on deploying a Sinatra app with a DB to Heroku. Through Heroku&rsquo;s docs and this <a href="https://www.sitepoint.com/get-started-with-sinatra-on-heroku/">Get Started with Sinatra on Heroku</a> from 2013 I got it up and running though. The biggest thing was setting up Postgres and what to put in the <code>Procfile</code>. Let me see if I can remember what exactly I did:</p>

<ol>
<li>Add <code>gem 'pg'</code> to your Gemfile. Also, define your version of ruby, ie. <code>ruby '2.4.1'</code> in your Gemfile.</li>
<li>I changed the sqlite gem to development like this <code>gem 'sqlite3', :group =&gt; :development</code>.</li>
<li>I added a <code>config/database.yml</code> because the Heroku docs said to but I don&rsquo;t know if it&rsquo;s needed. I&rsquo;ll probably delete it and see what happens in the near future. The Heroku docs have an example that I used and just changed the <code>database:</code> names.</li>

<li><p>I <em>think</em> <code>config/environment.rb</code> is where the magic happened. I kept the <code>:development</code> environment using sqlite3 because I read in some of the docs that you needed to know the host, username, password, port and something else to make it work locally. I figured if I could get it to work without figuring that out I would do that. I got this working locally running <code>shotgun</code> and on the Heroku server too. With the changes it now looks like this:</p>

<pre><code class="language-ruby">require 'bundler/setup'
Bundler.require

configure :development do
  ENV['SINATRA_ENV'] ||= &quot;development&quot;

  ActiveRecord::Base.establish_connection(
    :adapter =&gt; &quot;sqlite3&quot;,
    :database =&gt; &quot;db/neighborhood#{ENV['SINATRA_ENV']}.sqlite&quot;
  )
end

configure :production do
  db = URI.parse(ENV['DATABASE_URL'] || 'postgres://localhost/mydb')

  ActiveRecord::Base.establish_connection(
    :adapter =&gt; db.scheme == 'postgres' ? 'postgresql' : db.scheme,
    :host     =&gt; db.host,
    :username =&gt; db.user,
    :password =&gt; db.password,
    :database =&gt; db.path[1..-1],
    :encoding =&gt; 'utf8'
  )
end

require_all 'app'
</code></pre></li>

<li><p>The <code>Procfile</code> was something I couldn&rsquo;t figure out. The <a href="https://www.sitepoint.com/">SitePoint</a> article I linked above had this line for it and this is what made it all work <code>web: bundle exec rackup config.ru -p $PORT</code>.</p></li>

<li><p>For the rest I followed the Ruby docs on Heroku <a href="https://devcenter.heroku.com/articles/getting-started-with-ruby#introduction">here</a> and the SQLite doc <a href="https://devcenter.heroku.com/articles/sqlite3">here</a>.</p></li>

<li><p>If you get db migration errors you can run rake tasks on Heroku. <code>heroku run rake db:migrate</code> was one that I needed to do. More in dept docs about it <a href="https://devcenter.heroku.com/articles/rake">here</a>.</p></li>
</ol>

<p>Hey, look at that. I remembered way more than I thought. Hopefully this was helpful to someone somewhere. Probably a student coming behind me who is going to pull their hair out trying to get their app to work on Heroku.</p>

<p>Time spent today: 8:32<br />
Time spent total: 198:13<br />
Lessons completed today: 1<br />
Lessons completed total: 406</p>

    </div>

    <footer>
        <ul class="stats">
    
        

        
        
            <li>
                
                
                    

                    
                        Categories
                    
                
            </li>
        
    

    
    
        <li><a href='/categories/daily-blog'>daily blog</a></li>
    
        <li><a href='/categories/flatiron-blog'>flatiron blog</a></li>
    
</ul>

    </footer>
</article>
<ul class="actions pagination">
    
        <li><a href="https://itzsaga.github.io/post/day-050/"
                class="button big previous">Are you Gifted?</a></li>
    

    
        <li><a href="https://itzsaga.github.io/post/day-052/"
                class="button big next">Yay! You&#39;re on Rails!</a></li>
    
</ul>



    
        <article class="post">
            <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'my-flatiron-journey';
    var disqus_identifier = 'https:\/\/itzsaga.github.io\/post\/day-051\/';
    var disqus_title = 'I Deployed My Sinatra App To Heroku';
    var disqus_url = 'https:\/\/itzsaga.github.io\/post\/day-051\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        </article>
    


    </div>
    
<section id="sidebar">

    
        <section id="intro">
            
            
                
                    <a href="/" class="logo"><img src="https://res.cloudinary.com/sethalexander/image/upload/v1487653136/seth_iign80.jpg" alt="Seth" /></a>
                
            
            
                <header>
                    <h2>My Flatiron Journey</h2>
                    <p>How I went from a restaurant manager to a web developer via the Flatiron Online Web Developer Boot Camp</p>
                </header>
            
            <ul class="icons">
                
                
                    
<li><a href="//github.com/itzsaga" target="_blank" title="GitHub" class="fa fa-github"></a></li>



















<li><a href="//instagram.com/sethaalexander" target="_blank" title="Instagram" class="fa fa-instagram"></a></li>









<li><a href="//medium.com/@sethalexander" target="_blank" title="Medium" class="fa fa-medium"></a></li>









<li><a href="//linkedin.com/in/sethalexander" target="_blank" title="LinkedIn" class="fa fa-linkedin"></a></li>















<li><a href="//twitter.com/itzsaga" target="_blank" title="Twitter" class="fa fa-twitter"></a></li>



<li><a href="mailto:sethalexander@protonmail.com" title="Email" class="fa fa-envelope"></a></li>


                
            </ul>
        </section>

    
        <section id="recent-posts">
            <ul class="posts">
                <header>
                    <h3>Recent Posts</h3>
                </header>
                
                    
                

                
                    
                

                
                    <li>
                        <article>
                            <header>
                                <h3><a href="https://itzsaga.github.io/post/day-099/">Popular Gems Are All The Rage</a></h3>
                                
                                    
                                
                                <time class="published" datetime=
                                    '2017-06-05'>
                                    June 5, 2017</time>
                            </header>
                        </article>
                    </li>
                
                    <li>
                        <article>
                            <header>
                                <h3><a href="https://itzsaga.github.io/post/day-098/">The Asset Pipeline Is Flowing</a></h3>
                                
                                    
                                
                                <time class="published" datetime=
                                    '2017-06-04'>
                                    June 4, 2017</time>
                            </header>
                        </article>
                    </li>
                
                    <li>
                        <article>
                            <header>
                                <h3><a href="https://itzsaga.github.io/post/fccnashville-june-meetup-recap/">freeCodeCamp Nashville June Meetup Recap</a></h3>
                                
                                    
                                
                                <time class="published" datetime=
                                    '2017-06-03'>
                                    June 3, 2017</time>
                            </header>
                        </article>
                    </li>
                

                
                    <li>
                        <ul class="actions">
                            <li><a href=
                            
                                "/post/"
                            
                            class="button">View more posts</a></li>
                        </ul>
                    </li>
                
            </ul>
        </section>

    
    
    
    
        <section id="categories">
            <ul class="posts">
                <header>
                    <h3><a href="/categories/">Categories</a></h3>
                </header>

                
                    
                

                
                    <li>
                        <article>
                            <header>
                                <a href="/categories/daily-blog/">daily blog</a>
                                <span style="float:right;">90</span>
                            </header>
                        </article>
                    </li>
                
                    <li>
                        <article>
                            <header>
                                <a href="/categories/flatiron-blog/">flatiron blog</a>
                                <span style="float:right;">4</span>
                            </header>
                        </article>
                    </li>
                
                    <li>
                        <article>
                            <header>
                                <a href="/categories/freecodecamp-nashville/">freeCodeCamp Nashville</a>
                                <span style="float:right;">2</span>
                            </header>
                        </article>
                    </li>
                
                    <li>
                        <article>
                            <header>
                                <a href="/categories/general/">general</a>
                                <span style="float:right;">2</span>
                            </header>
                        </article>
                    </li>
                
            </ul>
        </section>
    

    
        
        <section class="blurb">
            <h2>About</h2>
            <p>I&#39;m a family man that works hard and is looking to get ahead. I&#39;m smart and love tech. That&#39;s all there is to it.</p>

            <ul class="actions">
                <li><a href="/about/" class="button">Learn More</a></li>
            </ul>
        </section>
        

    
        <section id="footer">
            <ul class="icons">
                
                
                    
<li><a href="//github.com/itzsaga" target="_blank" title="GitHub" class="fa fa-github"></a></li>



















<li><a href="//instagram.com/sethaalexander" target="_blank" title="Instagram" class="fa fa-instagram"></a></li>









<li><a href="//medium.com/@sethalexander" target="_blank" title="Medium" class="fa fa-medium"></a></li>









<li><a href="//linkedin.com/in/sethalexander" target="_blank" title="LinkedIn" class="fa fa-linkedin"></a></li>















<li><a href="//twitter.com/itzsaga" target="_blank" title="Twitter" class="fa fa-twitter"></a></li>



<li><a href="mailto:sethalexander@protonmail.com" title="Email" class="fa fa-envelope"></a></li>


                
            </ul>

            <p class="copyright">&copy; My Flatiron Journey. Design: <a href="http://html5up.net" target="_blank">HTML5 UP</a>. Ported by <a href="//github.com/jpescador" target="_blank">Julio Pescador</a>. Powered by <a href="//gohugo.io" target="_blank">Hugo</a></p>
        </section>

</section>

            </div>
        <a id="back-to-top" href="#" class="fa fa-arrow-up fa-border fa-2x"></a>
        

        
        
            
        

        
        
            <script src="/js/jquery.min.js"></script>
            <script src="/js/skel.min.js"></script>
            <script src="/js/util.js"></script>
            <script src="/js/main.js"></script>
            <script src="/js/backToTop.js"></script>
            <script src="/js/highlight.pack.js"></script>
        

        

            
            <script>hljs.initHighlightingOnLoad();</script>
            
    </body>
</html>

